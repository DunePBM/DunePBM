<?php 
// Bidding Round
// Called from index.php
// storm-round.php --> bidding-round.php --> movement-round.php

//######################################################################
//###### Forms #########################################################
//######################################################################
if (empty($_POST)){
    global $game, $info;

    //##############################################################
    //## First Run #################################################
    //##############################################################
    if (!isset($game['biddingRound'])) {
        $game['biddingRound'] = array();
    }
    
    //##############################################################
    //## Every Run #################################################
    //##############################################################
	echo 
	'<h2>Bidding Round</h2>';
}

//######################################################################
//###### Post ##########################################################
//######################################################################
if (isset($_POST['stormAction'])) {
    if ($_POST['storm_action'] == 'done') {
        dune_readData();
        $game['meta']['next'][$_SESSION['faction']] = 'wait.php';
    }
        
    //##############################################################
    //## Checks for End of Round ###################################
    //##############################################################
    dune_readData();
    dune_checkRoundEnd('biddingRound', 'movement-round.php',
                                        'Bidding round has ended.');
    refreshPage();
}
?>
